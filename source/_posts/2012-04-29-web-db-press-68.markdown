---
layout: post
title: "Web+DB Press (& Web+Habit Press)"
date: 2012-04-29 18:27
comments: true
categories: 
---

![image](http://ecx.images-amazon.com/images/P/4774150312.01._SCLZZZZZZZ_.jpg)

[出張](http://trac.webkit.org/wiki/April%202012%20Meeting)しているうちに
[WEB+DB Press 68](http://www.amazon.co.jp/dp/4774150312) が届いていました。
ありがとうございます。紹介にそなえ Octopress 向け Amazon ピンハネプラグインでも書いておけばよかった・・・。
[目次をじっとにらむと](http://gihyo.jp/magazine/wdpress/archive/2012/vol68#toc)
私もひそかに連載をはじめさせてもらっていることに気づかれるかもしれません。
お手元にある方はぱらぱらめくってみてくだされば幸いです。

私もぱらぱらめくってみたところ、
[Satoshi Nakajima](http://satoshi.blogs.com/) さんが
ウェブ中毒・・・じゃなくてプッシュ型メディアと生産性について書いていた。
要約すると、モチベーションがあればウェブで気が散ったりしないから大丈夫、というのが氏の主張らしい。
1% のスーパープログラマおよび 60% (推定) の健常者的にはそれが正しい答えだろうし、
モチベーションだってたぶんあるに越したことはないとも思う。
ただモチベーションだけを頼っては色々片付けられない 39% (推定) の rest of us としては
正しくなくていいから破滅しない方法が知りたい。
だって Chrome OS の時代([もうすぐ来る予定](http://www.theverge.com/2012/4/26/2978163/aura-chrome-os-hands-on)。免責事項: ステマ)
がきたら `/etc/hosts` をいじれないわけですよ。
というか免責するまでもなく iOS とかあんどろとか既にいじれない。
個人的には生産性低下による雇用の危機は石油資源枯渇によるエネルギー危機より切迫している。

The Power Of Habit
----------------


![cover](http://ecx.images-amazon.com/images/P/1400069289.01._SCLZZZZZZZ_.jpg)

知人各氏は私がたびたび
[断線](http://dodgson.org/omo/t/?date=20080607)
[やら](http://stepped.dodgson.org/?date=20090102)
[ウェブ中毒](http://stepped.dodgson.org/?date=20091012)
やらわめいているのを知っておりかつ辟易しているかもしれない。
この断線/ウェブ解毒活動はぼちぼち続いており、
その成果は長くなるので今日は書かないけれども、
直近の話題に限ると出張中に読んだ [Power Of Habit](http://www.amazon.co.jp/dp/1400069289) は
面白い読み物だった。駄本の多い断線リテラシーで異彩を放っている。

NYTimes のライターである著者は、まず習癖(Habit)を **Cue(きっかけ) → Routine(動作) → Reward(達成感) の繰り返し** として位置づける。
この繰り返しを中心に置き、取材や調査の結果をおりまぜながら本書の議論は進む。

たとえば **cue** とはなんだろう。消臭剤ファブリーズは発売当時、全く売れ行きが伸びず悩んでいた。
主要顧客であるはずの匂いのきつい家、匂いのきつい服などの持ち主は、自分の匂いに慣れているためファブリーズを使うきっかけ(cue)を見いだせない。
そこでファブリーズのマーケターは発想を変え、掃除の最後を締めくくるスプレーとして主婦層にファブリーズを売り込んだ。
雑巾がけを終えた、ベッドメイクを済ませたその瞬間に、祝福のファブリーズをベッド/カーテン/マットにひとふき！ 掃除機ではとれない匂いも落とせて完璧！ というわけ。
事前の調査から、マーケターたちはそうした最後の瞬間に主婦達が決まって笑顔を浮かべる様子を突き止めていた。
おかげで**掃除完了の一服**を cue としてとらえ、便乗することが出来た。

**Reward** の例には 20 世紀前半に売れた歯磨き粉 Pepsodent が紹介されている。
Pepsodent は歯磨き粉の歴史を覆す大ヒット商品だったらしい。
Pepsodent の秘密はその味にあった。スッキリ感のある**シトラス系の風味** を使い、歯を磨いた reward を演出したのだ。
今では珍しくない味付き歯磨き粉も当時は画期的だった。
そうした風味は歯磨き粉自体の薬効に何ら寄与しない。Reward を与えるためだけに入っている。
当初無臭だったファブリーズも、同じ理由でちょっとだけ香りがついている。石鹸のような香りが掃除完了の達成感を演出する。

その後も「安全第一」の habit でアルミ精錬会社の Alcoa を立て直した CEO, 
自覚と意思によって habit をねじふせるアメリカ版レコーディング・ダイエットとスタバ店員、
データから顧客の habit を予測して広告を送りつけるスーパーマーケット Target のデータマイニングなど、興味深い話が続く。

最終章で著者はこう説く。夢遊病者が人を殺しても責任能力を問えない。
けれど重症のギャンブラーが悪徳カジノの一夜で億単位の金をスったら返済の義務がある。
殺人の方が罪が重いのになぜか。一億スったギャンブラーだってディーラーに拐かされただけなのに... 

夢遊病者とギャンブラーの違いは一線を超える前に気づく機会があったかどうかだと著者はいう。
ギャンブラーはのめり込む前に手を打つことが出来た。だから責任を問えるのだと。
身につまされる。ウェブ中毒でクビになっても会社都合退職にはならないだろうってことだからね [IANAL](http://en.wikipedia.org/wiki/IANAL) だけど・・・

Habitalt: An Anti-Habitual Blocker
----------------

同書の Appendix には残念な習癖を立て直す手引きがついてくる。
著者が勧める habit 克服のコツは **cue と reward を突き止める**こと。

「毎日スタバでクッキーを買うのは太るから止めたい」という著者の例をひいてみる:

 * クッキーを食べたい！ (あるいは食べてしまった) ら、その衝動につかれた状況を短くメモしておく。
   何を考えていた? 何をしていた? 何時頃? 誰が周りにいた? 記録を集めるとパターンがみえてくる。どうも衝動に駆られるのはいつも午後三時頃のようだ。
 * 次は reward のバリエーションを試してみる。たとえばスタバに行かず休憩コーナーの駄菓子にしてみる。
   あるいはスタバの買い物をコーヒーだけにしてみる。それから 15 分後に気分を振り返る。
   もしコーヒーを飲んだだけでクッキーへの衝動が消えていたら、それはスタバで交わす同僚との雑談が自分の欲しいものだったとわかる。
 * 記録を一週間程度つづけたところで対策を考える。スタバのかわりにそのへんで雑談すればいいだけかもしれない。 15 時にタイマーをセットし、先手をうって休憩をとり同僚と世間話でもしよう。

どんな habit 相手にもこう上手くいくとは思えないけれど （職場の駄菓子が好きだったらどうすんの?) 
習癖を断つには cue と reward の分析から始めよという指摘自体は的を射ている。
`/etc/hosts` は強力な断線機能を備えるものの、そうした振り返りの機会を与えてくれない。
一時期 `/etc/hosts` に並べたリダイレクト先の localhost に意味のあるコンテンツを置けば
何かわかるんじゃないかと考えていたけれど、反省掲示板みたいのを置いとけばよかったんだな・・・。

もともと `/etc/hosts` をなんとか卒業したい気持ちもあったので、
localhost のかわりに [Habitalt](http://www.habitalt.me/) という小さい Chrome extension (と補助サイト) を書いてみた。
エクステンションのインストールは [habitalt.me/crx](http://habitalt.me/crx) から。

![img](https://lh4.googleusercontent.com/-KoytUMp1cOE/T6IlDxUGfxI/AAAAAAAAFkk/016x00s83hs/s288/Screenshot%2520at%25202012-05-03%252015%253A24%253A54.png)
![img](https://lh6.googleusercontent.com/-bUurxsRFh6Y/T6IlD-yIiBI/AAAAAAAAFko/2dVgUfMSYok/s288/Screenshot%2520at%25202012-05-03%252015%253A25%253A35.png)

機能:


 * 指定したサイトへのアクセスを検出したタブを左のような記録画面にリダイレクトします。その瞬間の衝動をすかさず打ち明けましょう。記録内容は書いた人だけに見えます。
 * アクセスしようとしたサイトと時刻は Habitalt が付記し、メッセージと一緒に右のような画面から一覧できます。(冒頭のは頭を冷やせ的メッセージです。どうでもいいです・・・)
 * ブロックサイトを指定する正規表現はエクステンションのオプション画面から変更できます。

私の場合、もともと諸悪の根源はビルド待ちだと信じていた。
ところが自分の振る舞いを調べてみると、ビルド待ち以外にもバグで行き詰まったとき、
直近の作業がすべてレビュー待ちになってしまったとき、同僚に話しかけられた直後など、
言われて見れば自明だけれど思ったより目立つ cue が他にもみつかった。
なのでまずはぼんやり gdb をうごかすのではなくもうちょっと系統だててデバッグできるよう [Code Complete](http://www.amazon.co.jp/dp/489100455X) でも読みなおそうと思った。
いや普通こんなの読まなくていいと思うんだけど古いコードベース相手に仕事してるからさ・・・。

----

[むかし似たようなことをやった事実](http://stepped.dodgson.org/?date=20091012) については概ねほっといていただきたいけれども、
いちおうブラウザの進化および自分の反省を踏まえちょっとはマシなものになっている...気がする。
具体的には Chrome に [webRequest API](http://code.google.com/chrome/extensions/trunk/experimental.webRequest.html) という
HTTP リクエストをフックできる機能がついたので、これで習癖サイトへのアクセスをブロックしてみた。タブが開いた瞬間を検出する以前の方式だと元サイトがチラっと見えてしまい
フラストレーションがたまるのに対し、 webRequest ベースのフィルタリングは `/etc/hosts` に近いレベルでバシっと断ち切る。
回数制限のように習慣改善を邪魔する機能はなくした。

webRequest は大変凶悪というか何でもアリな API のため、この API をつかっていると [Chrome Web Store](https://chrome.google.com/webstore) への掲載にレビューを求められるらしい。
時間がかかりそうなので仕方なく自分でホストすることにしました。せっかくストア用のタイトル画像をつくったのになあ。

![title](https://lh4.googleusercontent.com/-5OwCXehUKYA/T6IcM-xinRI/AAAAAAAAFkQ/bKPE9qVCuqQ/s800/title.jpeg)

39% クラブの皆様はご利用ください - と友達に話したら、
そこまで思いつめてる人ほとんどいないとおもうよ、とあしらわれた。またまたご冗談を・・・
ロードマップとしてはページネーションと時刻分布のヒストグラムくらいはつける予定。

----

 * Github repo: https://github.com/omo/habitalt
 * タイトル画像: http://www.flickr.com/photos/linneberg/5060134205/
